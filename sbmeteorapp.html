<head>
  <title>Speech Banana</title>
  <meta name="viewport" content="width=device-width">
  <link rel="stylesheet" href="css/sbmeteorapp.css">
</head>


<template name="layout">
  {{> navigationBar}}
  <div class="container main">
    {{> yield}}
  </div>
  <!-- {{> footer}} -->
</template>


<template name="appBody">
  {{#if currentUser}}
    {{> lessonShow}}
  {{else}}
    {{> welcomePage}}
  {{/if}}
</template>


<template name="welcomePage">
    Welcome stranger!
</template>


<template name="lessonShow">
  {{#each lessons}}
  <p>
    <a href="{{pathFor 'wordSetShow'}}">
      <button class='btn btn-default btn-lesson'>{{number}}: {{title}}</button>
    </a>
  </p>
  {{/each}}
 </template>


<template name="playMenu">
  <button type="button" class="btn sound-menu" data-toggle="modal" data-target="#playMenu">
    <h2><span class="glyphicon glyphicon-cog"></span></h2>
  </button>

  <div class="modal fade" id="playMenu" tabindex="-1" role="dialog" aria-labelledby="playMenu" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">

        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
          <h3 class="modal-title" id="myModalLabel">Sound Settings</h3>
        </div>

        <div class="modal-body">
          <h3>Voice Gender</h3>
          <form role="form">
            <div class="radio">
              <label><input type="radio" id="male" name="optradio" checked={{checkedGender'm'}} />Male</label>
              <label><input type="radio" id="female" name="optradio" checked={{checkedGender 'f'}} />Female</label>
            </div>
          </form>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
        </div>

      </div>
    </div>
  </div>
</template>


<template name="wordSetShow">

  <h4>Lesson {{lessonNumber}}: {{lessonTitle}}</h4>
  <hr>

  <div class="btn-group" role="group">
    {{#each sets}}
    <button type="button" class="word-set {{activeSet}} btn btn-default">{{title}}</button>
    {{/each}}
  </div>
  <button type="button" class="quiz {{activeQuiz}} btn btn-default">Quiz</button>
  <br>
  <br>

  {{#if activeQuiz}}
    {{> quiz}}
  {{else}}

    <ul class="list-inline ul-word">
      {{#each words}}
      <li class="li-word">
        <button class="audio btn btn-word">
          <h4>
            {{word}}
            <span class="glyphicon glyphicon-play-circle"></span>
          </h4>
          <audio src="{{url}}" ></audio>
        </button>
      </li>
      {{/each}}
    </ul>

    <ul class="list-inline group-menu">
    </ul>

    <div class="row group-menu">
      <div class="col-xs-2" style="visibility: {{hidePreviousGroupArrow}};">

        <button type="button" class="btn previous-word-group pull-left">
          <h2><span class="glyphicon glyphicon-menu-left"></span></h2>
        </button>

      </div>
      <div class="col-xs-8 text-center"> <!-- style="visibility: {{hideGroupMenu}};"> -->

        <!--
        <ul class="list-inline word-group">
          {{#each groups}}
          <li>
            <button type="button" class="btn btn-default btn-word-group {{activeGroup}}" style="outline: none;">{{group}}</button>
          </li>
          {{/each}}
        </ul>
        -->

        {{> playMenu}}

      </div>
      <div class="col-xs-2" style="visibility: {{hideNextGroupArrow}};">

        <button type="button" class="btn next-word-group pull-right">
          <h2><span class="glyphicon glyphicon-menu-right"></span></h2>
        </button>

      </div>
    </div>

  {{/if}}
</template>


<template name="quiz">
  <p>
    Current Score: {{totalCorrect}} / {{totalTaken}}
    <br>
    {{#if submitted}}
      {{#if newScore}}
        Good job! You got the whole sentence right :)
      {{else}}
        Not quite!
      {{/if}}
    {{/if}}
  </p>

  {{#with sentence}}
  <button class="audio btn btn-default">
    {{sentence.sentence}}
    <span class="glyphicon glyphicon-play"></span>
    <audio src="{{sentence.url}}" ></audio>
  </button>
  {{/with}}
  <br>

  <form role="form" class="user-guess">
    <div class="row">
      <div class="form-group col-lg-6">
        <div class="input-group">
          <span class="input-group-btn">
            <button type="submit" value="submit" class="user-guess btn btn-default" {{activeQuizSubmit}}>Check</button>
          </span>
          <input type="text" name="text" class="user-guess form-control" placeholder="Type what you hear.">
        </div><!-- /input-group -->
      </div>
    </div>
  </form>

  <button class="quiz-next btn btn-default">Continue</button> 
</template>


<template name="about">
  About! Summary of what app does and how to use it
</template>


<template name="progress">
  Progress: graphs of data from sentence tests
  {{#each scores}}
    <p>{{quiz}}: {{total_correct}} / {{total_taken}}</p>
  {{/each}}
</template>


<template name="navigationBar">
  <nav class="navbar navbar-default navbar-top" role="navigation" id="home">
    <div class="container">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapse-1">
      <span class="sr-only">Toggle navigation</span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      <span class="icon-bar"></span>
      </button>
      <div class="navbar-header">
         <a class="navbar-brand" rel="home" id="brand" href="{{pathFor 'appBody'}}" title="Speech Banana">
         Speech Banana
         </a>
      </div>
      <!-- Non-collapsing right-side icons -->
      <div class="nav navbar-nav navbar-right">
        <a id="university-link" href="http://www.jhu.edu/">
          <img class="hidden-xs" id="university-logo" src="img/university_logo_small_horizontal_white.png">
          <img class="hidden-lg hidden-md hidden-sm" id="university-shield" src="img/university_shield_small_white.png">
        </a>
      </div>
      <!-- the collapsing menu -->
      <div class="collapse navbar-collapse navbar-left"  id="navbar-collapse-1">
        <ul class="nav navbar-nav">
          <!-- <li class={{activeNav 'home'}} id='home'><a href="{{pathFor 'appBody'}}">Home</a></li>  Considering geting rid of this button. Don't want it but perhaps users expect it? -->
          <li class={{activeNav 'about'}} id='about'><a href="{{pathFor 'about'}}">About</a></li>
          {{#if currentUser}}
          <li class={{activeNav 'progress'}} id='progress'><a href="{{pathFor 'progress'}}">Progress</a></li> <!-- Maybe we could call it a log or practice log instead -->
          {{/if}}
          {{> loginButtons}}
        </ul>
      </div>
    </div>
    <!--/.container -->
  </nav>
</template>


<template name="footer">
  <div class="navbar navbar-default navbar-fixed-bottom">
    <div class="container">
      <p class="text-muted">
        <small>&copy; 2015 Speech Banana, Johns Hopkins University</small>
      </p>
    </div>
  </div>
</template>
